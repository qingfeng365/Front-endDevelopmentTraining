# 第03讲 创建组件

## 本讲项目介绍

### 项目名称

`mystock`

github 项目地址
[https://github.com/qingfeng365/mystock.git](https://github.com/qingfeng365/mystock.git)

### 初始准备

- 新建普通项目
- 引入jquery bootstrap 第三包

### 布局说明


```js
`|---------------------| ` 
`|       navbar        | ` 
`|---------------------| ` 
`| search  | carousel  | `     
`|         |           | ` 
`|         |-----------| ` 
`|         | product   | `
`|         |   (stars) | `  
`|---------------------| `  
`|     footer          | ` 
`|---------------------| ` 
```

### 创建组件

在项目根目录命令行运行

```bash
ng g c navbar
ng g c search
ng g c carousel
ng g c product
ng g c footer
ng g c stars
```



## 命令行说明

### `ng g component`

`ng generate component [name]`

可简写为:

`ng g c [name]`


组件创建到 `src/app` 目录

可以指定目录,但目录会 `src/app` 下级目录创建

当指定目录时,跟命令行窗口当前目录有关系

如果命令行窗口当前目录,是`src/app` 目录或上级目录, 则目录会在 `src/app` 的下级目录创建

如果命令行窗口当前目录,本身已经是`src/app` 的下级目录, 则目录会在 当前目录的下级目录创建

### app.module.ts

如果不指定模块,则会自动在 根模块 引入新组件

### 常见错误

在引用组件时,如果 使用[属性绑定], 属性如果不存在, 到导致根组件无法加载,

要注意检查,特别是在组件未完成的情况,就先引用时,要特别注意检查

### 组件自动生成的代码

```ts
import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-navbar',
  templateUrl: './navbar.component.html',
  styleUrls: ['./navbar.component.css']
})
export class NavbarComponent implements OnInit {

  constructor() { }

  ngOnInit() {
  }

}
```

constructor 先执行
ngOnInit 后执行

### implements

表示 类 实现 某个特定的接口

### OnInit

是 @angular/core 定义的接口

要求实现方法

```ts
export interface OnInit {
    ngOnInit(): void;
}
```

### ngOnInit

在组件实例创建完成后, 且组件声明的输入属性绑定首次执行后,会执行一次

即父组件传递属性后,执行

用于 子组件在首次创建后,并接收到父组件传来值后,进行 内部属性的初始化

### 输入属性

当需要在组件声明时,同时传入父组件的值或需要指定特殊值时,

需要定义输入属性

```ts
export class StarsComponent implements OnInit {

  @Input()
  private rating = 0;
}
```


```html
      <app-stars [rating]="product.rating"></app-stars>
```


### 命令行说明

[Component](https://github.com/angular/angular-cli/wiki/generate-component) 

`ng g component my-new-component`


ng generate component
Overview

ng generate component [name] generates a component
Options
app

`--app` (alias: `-a`) _default value: 1st app_

Specifies app name to use.
change-detection

`--change-detection` (alias: `-cd`)

Specifies the change detection strategy.
flat

`--flat` _default value: false_

Flag to indicate if a dir is created.
export

`--export` (alias: `-`) _default value: false_

Specifies if declaring module exports the component.
inline-style

`--inline-style` (alias: `-is`) _default value: false_

Specifies if the style will be in the ts file.
inline-template

`--inline-template` (alias: `-it`) _default value: false_

Specifies if the template will be in the ts file.
module

`--module` (alias: `-m`)

Allows specification of the declaring module.
prefix

`--prefix`

Specifies whether to use the prefix.
skip-import

`--skip-import` _default value: false_

Allows for skipping the module import.
spec

`--spec`

Specifies if a spec file is generated.
view-encapsulation

`--view-encapsulation` (alias: `-ve`)

Specifies the view encapsulation strategy.
