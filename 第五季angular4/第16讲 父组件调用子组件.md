# 第16讲 父组件调用子组件

## 定义子组件的方法

`/src/app/child/child.component.ts`

```ts
import {
  Component, OnInit, Input, OnChanges, SimpleChanges, DoCheck,
  AfterViewInit, AfterViewChecked
} from '@angular/core';

@Component({
  selector: 'app-child',
  templateUrl: './child.component.html',
  styleUrls: ['./child.component.css']
})
export class ChildComponent implements OnInit {
  ngOnInit(): void {

  }
  greeting(name: string) {
    console.log('hello ' + name);
  }

}
```

`/src/app/child/child.component.html`

```html
<p>
  child works!
</p>
```


## 父组件调用子组件的方法

`/src/app/app.component.html`

```html
<app-child #child1></app-child>
<app-child #child2></app-child>
<button (click)="child2.greeting('Jerry')">调用child2的greeting方法</button>
```


`/src/app/app.component.ts`

```ts
import { ChildComponent } from './child/child.component';
import { Component, ViewChild, OnInit, AfterViewInit, AfterViewChecked } from '@angular/core';


@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent implements OnInit {

  message: string;

  @ViewChild('child1')
  child1: ChildComponent;

  constructor() { }

  ngOnInit(): void {
    this.child1.greeting("Tom");
  }
}

```

## 方式1说明

通过代码调用子组件的要点:

- 使用`@ViewChild` 装饰器,将子组件映射到父组件的属性上
- 要使用`@ViewChild` 装饰器,还必须在模板中定义子组件的本地变量
- `@ViewChild`装饰器要使用模板的本地变量作为参数


## 方式2说明

在模板中直接调用的要点

- 只需要在模板中定义子组件的本地变量
- 直接通过本地变量调用


